import{u as E,r as c,j as t,Y as Z,ac as R,ae as N,af as T,ag as F,au as D}from"./app-PnxvuRUn.js";import{S as A,T as G}from"./StarRating-Btz9lM1S.js";import{b as q}from"./index-CXwY__dY.js";import{s as Q}from"./index-BPjIG6ua.js";const J=({products:x,page:v,category_slug:b,subcategory_slug:w=null})=>{const{t:l,i18n:i}=E(),[C,_]=c.useState({}),[h,W]=c.useState(!1),S=(e,a)=>{_(s=>({...s,[e]:a}))},[f,k]=c.useState([]),[p,V]=Q.useNotification(),[m,y]=c.useState({}),d=(e,a)=>`${e}-${a}`,g=async()=>{const e=await R();k(e)};c.useEffect(()=>{f.forEach(e=>{d(e.productId,e.optionId),e.quantity})},[f]),c.useEffect(()=>{g()},[]);const H=(e,a,s,r,o)=>{const n=d(e,a);y(u=>({...u,[n]:(u[n]||0)+1})),N(e,a,s,r,o,1),g(),p.success({message:"",description:`${l("notify.add_cart")}`})},$=(e,a,s,r,o)=>{const n=d(e,a);y(u=>({...u,[n]:(u[n]||0)+1})),N(e,a,s,r,o,1),g(),p.success({message:"",description:`${l("notify.add_cart")}`})},L=(e,a)=>{const s=d(e,a);y(r=>({...r,[s]:Math.max((r[s]||1)-1,0)})),T(e,a,1),g(),p.success({message:"",description:`${l("notify.remove_cart")}`})},M=(e,a,s,r,o,n)=>{F(e,a,s,r,o,n),p.success({message:"",description:`${l("notify.wish_list")}`})},j=c.useCallback((e,a)=>{const s=d(e,a);return m[s]||0},[m]);return t.jsxs(t.Fragment,{children:[V,x.map((e,a)=>{const s=C[e.id]||e.product_option[0].id,r=e.product_option.find(o=>o.id===s);return t.jsxs("div",{className:"border-2 p-4 rounded-lg flex  items-center gap-4 relative",children:[(e.state=="special"||e.state=="new")&&t.jsx("div",{className:`absolute top-4 ${i.language=="ar"?"left-0 rounded-s-full":"right-0 rounded-s-full"}  bg-primary-color text-white py-1 px-2`,children:e.state=="special"?l("exhibition.special"):l("exhibition.new")}),t.jsx(Z,{href:v==="category"?route("product-category",{lang:i.language,category:b,product:e.slug}):route("product-subcategory",{lang:i.language,category:b,subcategory:w,product:e.slug}),children:t.jsx("div",{children:t.jsx("img",{src:e.main_image,alt:"",className:"h-52"})})}),t.jsxs("div",{className:"flex flex-col justify-between gap-4",children:[t.jsx("p",{className:" font-semibold text-lg hover:text-primary-color",children:e.title}),t.jsxs("p",{className:"font-semibold text-lg text-primary-color",children:[r==null?void 0:r.price," SAR"]}),t.jsx("div",{className:"flex",children:t.jsx(A,{rating:e.rate})}),t.jsx("select",{name:"price",className:`rounded-xl focus:border-primary-color focus:ring-primary-color ${i.language=="ar"?"!pl-10 pr-2":"!pr-10 pl-2"}`,style:{backgroundPosition:`${i.language=="ar"?"left":"right"}`},defaultValue:e.product_option[0].title,onChange:o=>S(e.id,Number(o.target.value)),children:e.product_option.map((o,n)=>t.jsxs("option",{value:o.id,children:[o.title," - (",o.price," SAR)"]},n))}),t.jsxs("div",{className:"flex w-full gap-4 flex-col lg:flex-row",children:[e.avilable?t.jsx("button",{type:"button",disabled:!0,className:"rounded-lg border-[1px] hover:bg-primary-color hover:text-white transition-all duration-300 border-primary-color px-4 py-2",children:l("exhibition.add_to_cart")}):j(e.id,s)>0?t.jsxs("div",{className:"flex justify-between items-center gap-4",children:[t.jsx("button",{type:"button",disabled:h,onClick:()=>$(e.id,s,e.title,e.main_image,(r==null?void 0:r.price)??0),className:"rounded-lg  bg-primary-color text-white text-center px-4 py-2",children:"+"}),t.jsx("span",{className:"font-medium",children:j(e.id,s)}),t.jsx("button",{type:"button",disabled:h,onClick:()=>L(e.id,s),className:"rounded-lg bg-primary-color text-white text-center px-4 py-2",children:"-"})]}):t.jsx("button",{type:"button",disabled:h,onClick:()=>H(e.id,s,e.title,e.main_image,(r==null?void 0:r.price)??0),className:"rounded-lg border-[1px] hover:bg-primary-color hover:text-white transition-all duration-300 border-primary-color px-4 py-2",children:l("exhibition.add_to_cart")}),t.jsx("button",{type:"button",onClick:()=>M(e.id,e.title,e.main_image,s,e.state,e.slug),className:"rounded-lg border-[1px] hover:bg-primary-color hover:text-white transition-all duration-300 border-primary-color px-4 py-2 text-lg flex justify-center items-center",children:t.jsx(G,{title:l("exhibition.wich_list"),children:t.jsx("span",{children:t.jsx(q,{})})})})]})]})]},a)})]})},K=({products:x,page:v,category_slug:b,subcategory_slug:w=null})=>{const{t:l,i18n:i}=E(),[C,_]=c.useState({}),[h,W]=c.useState(!1),S=(e,a)=>{_(s=>({...s,[e]:a}))},[f,k]=c.useState([]),[p,V]=Q.useNotification(),[m,y]=c.useState({}),d=(e,a)=>`${e}-${a}`,g=async()=>{const e=await R();k(e)};c.useEffect(()=>{f.forEach(e=>{d(e.productId,e.optionId),e.quantity})},[f]),c.useEffect(()=>{g()},[]);const H=(e,a,s,r,o)=>{const n=d(e,a);y(u=>({...u,[n]:(u[n]||0)+1})),N(e,a,s,r,o,1),g(),p.success({message:"",description:`${l("notify.add_cart")}`})},$=(e,a,s,r,o)=>{const n=d(e,a);y(u=>({...u,[n]:(u[n]||0)+1})),N(e,a,s,r,o,1),g(),p.success({message:"",description:`${l("notify.add_cart")}`})},L=(e,a)=>{const s=d(e,a);y(r=>({...r,[s]:Math.max((r[s]||1)-1,0)})),T(e,a,1),g(),p.success({message:"",description:`${l("notify.remove_cart")}`})},M=(e,a,s,r,o,n)=>{F(e,a,s,r,o,n),p.success({message:"",description:`${l("notify.wish_list")}`})},j=c.useCallback((e,a)=>{const s=d(e,a);return m[s]||0},[m]);return t.jsxs(t.Fragment,{children:[V,x.map((e,a)=>{const s=C[e.id]||e.product_option[0].id,r=e.product_option.find(o=>o.id===s);return t.jsxs("div",{className:"border-2 p-4 rounded-lg flex flex-col justify-center items-center gap-4 relative",children:[(e.state=="special"||e.state=="new")&&t.jsx("div",{className:`absolute top-4 ${i.language=="ar"?"left-0 rounded-s-full":"right-0 rounded-s-full"}  bg-primary-color text-white py-1 px-2`,children:e.state=="special"?l("exhibition.special"):l("exhibition.new")}),t.jsxs(Z,{href:v==="category"?route("product-category",{lang:i.language,category:b,product:e.slug}):route("product-subcategory",{lang:i.language,category:b,subcategory:w,product:e.slug}),children:[t.jsx("div",{children:t.jsx("img",{src:e.main_image,alt:"",className:"h-52"})}),t.jsx("p",{className:"self-start font-medium text-lg hover:text-primary-color",children:e.title})]}),t.jsxs("div",{className:"flex justify-between items-center w-full",children:[t.jsxs("p",{className:"font-semibold text-lg text-primary-color",children:[r==null?void 0:r.price," SAR"]}),t.jsx("div",{className:"flex",children:t.jsx(A,{rating:e.rate})})]}),t.jsx("div",{className:"w-full",children:t.jsx("select",{name:"price",className:`rounded-xl focus:border-primary-color focus:ring-primary-color ${i.language=="ar"?"!pl-10 pr-2":"!pr-10 pl-2"} w-full`,style:{backgroundPosition:`${i.language=="ar"?"left":"right"}`},defaultValue:e.product_option[0].title,onChange:o=>S(e.id,Number(o.target.value)),children:e.product_option.map((o,n)=>t.jsxs("option",{value:o.id,children:[o.title," - (",o.price," SAR)"]},n))})}),t.jsxs("div",{className:"flex w-full gap-4 flex-col lg:flex-row",children:[e.avilable?t.jsx("button",{type:"button",disabled:!0,className:"rounded-lg border-[1px] hover:bg-primary-color hover:text-white transition-all duration-300 border-primary-color px-4 py-2",children:l("exhibition.add_to_cart")}):j(e.id,s)>0?t.jsxs("div",{className:"flex justify-between items-center gap-4",children:[t.jsx("button",{type:"button",disabled:h,onClick:()=>$(e.id,s,e.title,e.main_image,(r==null?void 0:r.price)??0),className:"rounded-lg  bg-primary-color text-white text-center px-4 py-2",children:"+"}),t.jsx("span",{className:"font-medium",children:j(e.id,s)}),t.jsx("button",{type:"button",disabled:h,onClick:()=>L(e.id,s),className:"rounded-lg bg-primary-color text-white text-center px-4 py-2",children:"-"})]}):t.jsx("button",{type:"button",disabled:h,onClick:()=>H(e.id,s,e.title,e.main_image,(r==null?void 0:r.price)??0),className:"rounded-lg border-[1px] hover:bg-primary-color hover:text-white transition-all duration-300 border-primary-color px-4 py-2",children:l("exhibition.add_to_cart")}),t.jsx("button",{type:"button",onClick:()=>M(e.id,e.title,e.main_image,s,e.state,e.slug),className:"rounded-lg border-[1px] hover:bg-primary-color hover:text-white transition-all duration-300 border-primary-color px-4 py-2 text-lg flex justify-center items-center",children:t.jsx(G,{title:l("exhibition.wich_list"),children:t.jsx("span",{children:t.jsx(q,{})})})})]})]},a)})]})};function U(){const x=localStorage.getItem("grid");return x===null?!0:x==="true"}function X(){return localStorage.setItem("grid","true"),!0}function O(){return localStorage.setItem("grid","false"),!1}function P(x){return D({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 3C2.44772 3 2 3.44772 2 4V8L7.5 8V3H3ZM9.5 3V8H14.5V3H9.5ZM16.5 3V8H22V4C22 3.44772 21.5523 3 21 3H16.5ZM22 10H16.5V14H22V10ZM22 16H16.5V21H21C21.5523 21 22 20.5523 22 20V16ZM14.5 21V16H9.5V21H14.5ZM7.5 21V16H2V20C2 20.5523 2.44772 21 3 21H7.5ZM2 14H7.5V10L2 10V14ZM9.5 10H14.5V14H9.5V10Z"},child:[]}]})(x)}export{J as F,U as G,P as R,X as a,K as b,O as s};
