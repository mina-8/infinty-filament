import{u as B,r as c,j as t,Y as D,af as A,ag as F,ah as y,ai as H,aj as K}from"./app-B9FO6x_7.js";import{S as R,T as W}from"./StarRating-BwQtoNhP.js";import{IoIosHeartEmpty as Y}from"./index-BhDQ0sJn.js";import{s as q}from"./index-BKZ0qgiD.js";import"./ResizeObserver.es-B1PUzC5B.js";const J=({products:m})=>{const{t:l,i18n:d}=B(),[f,b]=c.useState(m),j=[{title:"exhibition.special_promtion",payload:"special"},{title:"exhibition.new_products",payload:"new"},{title:"exhibition.top_seller",payload:"top"},{title:"exhibition.kid_range",payload:"kids"}],[v,w]=c.useState("special"),[p,o]=c.useState(!1),N=async e=>{try{o(!0),w(e);const r=await F.get(route("filter-products",{lang:d.language}),{params:{statefilter:e}});b(r.data.products)}finally{o(!1)}},[C,_]=c.useState({}),S=(e,r)=>{_(s=>({...s,[e]:r}))},[u,k]=q.useNotification(),[h,I]=c.useState([]),n=async()=>{const e=await A();I(e)};c.useEffect(()=>{n()},[]);const $=async(e,r,s,a,i)=>{try{o(!0),await y(e,r,s,a,i,1),n(),u.success({message:"",description:`${l("notify.add_cart")}`})}catch{o(!1),n()}finally{o(!1)}},E=async(e,r,s,a,i)=>{try{o(!0),await y(e,r,s,a,i,1),n(),u.success({message:"",description:`${l("notify.add_cart")}`})}catch{o(!1),n()}finally{o(!1)}},T=async(e,r)=>{try{o(!0),await H(e,r,1),n(),u.success({message:"",description:`${l("notify.remove_cart")}`})}catch{o(!1),n()}finally{o(!1)}},L=(e,r,s,a)=>{K(e,r,s,a),u.success({message:"",description:`${l("notify.wish_list")}`})},g=c.useCallback((e,r)=>{const s=h.find(a=>a.productId===e&&a.optionId===r);return s?s.quantity:0},[h]);return t.jsxs("section",{className:"w-full max-w-6xl my-12 mx-auto relative",children:[k,t.jsx("h2",{className:"text-center my-4 font-bold text-3xl",children:l("home.exhibition")}),t.jsx("div",{className:"flex justify-center items-center gap-8 my-8",children:j.map((e,r)=>t.jsx("button",{type:"button",onClick:()=>N(e.payload),className:`border-primary-color hover:border-dashed border-opacity-0 hover:border-opacity-100 border-2 px-4 py-2 rounded-lg
                            ${v===e.payload?"border-opacity-100 border-dashed":""}
                            `,children:l(e.title)},r))}),p?t.jsx("div",{children:"loading ..."}):t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-4 my-8 gap-6",children:f.map((e,r)=>{const s=C[e.id]||e.product_option[0].id,a=e.product_option.find(i=>i.id===s);return t.jsxs("div",{className:"border-2 p-4 rounded-lg flex flex-col justify-center items-center gap-4 relative",children:[(e.state=="special"||e.state=="new")&&t.jsx("div",{className:`absolute top-4 ${d.language=="ar"?"left-0 rounded-s-full":"right-0 rounded-s-full"}  bg-primary-color text-white py-1 px-2`,children:e.state=="special"?l("exhibition.special"):l("exhibition.new")}),t.jsxs(D,{href:route("product-show",{lang:d.language,state:e.state,product:e.slug}),children:[t.jsx("div",{children:t.jsx("img",{src:e.image,alt:"",className:"h-52"})}),t.jsx("p",{className:"self-start font-medium text-lg hover:text-primary-color",children:e.title})]}),t.jsxs("div",{className:"flex justify-between items-center w-full",children:[t.jsxs("p",{className:"font-semibold text-lg text-primary-color",children:[a==null?void 0:a.price," KD"]}),t.jsx("div",{className:"flex",children:t.jsx(R,{rating:Number(e.rate)})})]}),t.jsx("div",{className:"w-full",children:t.jsx("select",{name:"price",className:`rounded-xl focus:border-primary-color focus:ring-primary-color ${d.language=="ar"?"!pl-10 pr-2":"!pr-10 pl-2"}`,style:{backgroundPosition:`${d.language=="ar"?"left":"right"}`},defaultValue:e.product_option[0].title,onChange:i=>S(e.id,Number(i.target.value)),children:e.product_option.map((i,x)=>t.jsxs("option",{value:i.id,children:[i.title," - (",i.price," KD)"]},x))})}),t.jsxs("div",{className:"flex w-full gap-4 flex-col lg:flex-row",children:[g(e.id,s)>0?t.jsxs("div",{className:"flex justify-between items-center gap-4",children:[t.jsx("button",{type:"button",disabled:p,onClick:()=>E(e.id,s,e.title,e.image,(a==null?void 0:a.price)??0),className:"rounded-lg  bg-primary-color text-white text-center px-4 py-2",children:"+"}),t.jsx("span",{className:"font-medium",children:g(e.id,s)}),t.jsx("button",{type:"button",disabled:p,onClick:()=>T(e.id,s),className:"rounded-lg bg-primary-color text-white text-center px-4 py-2",children:"-"})]}):t.jsx("button",{type:"button",disabled:p,onClick:()=>$(e.id,s,e.title,e.image,(a==null?void 0:a.price)??0),className:"rounded-lg border-[1px] hover:bg-primary-color hover:text-white transition-all duration-300 border-primary-color px-4 py-2",children:l("exhibition.add_to_cart")}),t.jsx("button",{type:"button",onClick:()=>L(e.id,e.title,e.image,s),className:"rounded-lg border-[1px] hover:bg-primary-color hover:text-white transition-all duration-300 border-primary-color px-4 py-2 text-lg",children:t.jsx(W,{title:l("exhibition.wich_list"),children:t.jsx(Y,{})})})]})]},r)})})]})};export{J as default};
