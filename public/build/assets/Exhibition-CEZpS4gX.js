import{u as D,r as n,j as t,Y as F,x as H,B as M,C as f,D as Q,E as R}from"./app-DjKXS682.js";import{S as W,T as Y,I as V}from"./index-k8p3NLpL.js";import{s as z}from"./index-Bxp7-sxQ.js";import"./ResizeObserver.es-B1PUzC5B.js";const X=({products:j})=>{const{t:o,i18n:c}=D(),[v,w]=n.useState(j),N=[{title:"exhibition.special_promtion",payload:"special"},{title:"exhibition.new_products",payload:"new"},{title:"exhibition.top_seller",payload:"top"},{title:"exhibition.kid_range",payload:"kids"}],[C,_]=n.useState("special"),[k,g]=n.useState(!1),S=async e=>{try{g(!0),_(e);const s=await M.get(route("filter-products",{lang:c.language}),{params:{statefilter:e}});w(s.data.products)}finally{g(!1)}},[$,E]=n.useState({}),T=(e,s)=>{E(a=>({...a,[e]:s}))},[u,B]=z.useNotification(),[y,h]=n.useState({}),d=(e,s)=>`${e}-${s}`,[b,G]=n.useState([]),x=()=>{H()};n.useEffect(()=>{b.forEach(e=>{d(e.productId,e.optionId),e.quantity})},[b]),n.useEffect(()=>{x()},[]);const I=(e,s,a,r,l)=>{const i=d(e,s);h(p=>({...p,[i]:(p[i]||0)+1})),f(e,s,a,r,l,1),x(),u.success({message:"",description:`${o("notify.add_cart")}`})},L=(e,s,a,r,l)=>{const i=d(e,s);h(p=>({...p,[i]:(p[i]||0)+1})),f(e,s,a,r,l,1),x(),u.success({message:"",description:`${o("notify.add_cart")}`})},q=(e,s)=>{const a=d(e,s);h(r=>({...r,[a]:Math.max((r[a]||1)-1,0)})),Q(e,s,1),x(),u.success({message:"",description:`${o("notify.remove_cart")}`})},A=(e,s,a,r,l,i)=>{R(e,s,a,r,l,i),u.success({message:"",description:`${o("notify.wish_list")}`})},m=n.useCallback((e,s)=>{const a=d(e,s);return y[a]||0},[y]);return t.jsxs("section",{className:"w-full max-w-6xl mx-auto relative",children:[B,t.jsx("h2",{className:"text-center my-4 font-bold text-3xl text-primary-color",children:o("home.exhibition")}),t.jsx("div",{className:"flex justify-center items-center gap-8 my-8 lg:flex-row lg:flex-nowrap flex-wrap",children:N.map((e,s)=>t.jsx("button",{type:"button",onClick:()=>S(e.payload),className:`border-primary-color hover:border-dashed border-opacity-0 hover:border-opacity-100 border-2 px-4 py-2 rounded-lg
                            ${C===e.payload?"border-opacity-100 border-dashed":""}
                            `,children:o(e.title)},s))}),k?t.jsx("div",{children:"loading ..."}):t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-4 my-8 gap-6 mx-12 lg:mx-0 ",children:v.map((e,s)=>{const a=$[e.id]||e.product_option[0].id,r=e.product_option.find(l=>l.id===a);return t.jsxs("div",{className:"border-2 p-4 rounded-lg flex flex-col justify-center items-center gap-4 relative",children:[(e.state=="special"||e.state=="new")&&t.jsx("div",{className:`absolute top-4 ${c.language=="ar"?"left-0 rounded-s-full":"right-0 rounded-s-full"}  bg-primary-color text-white py-1 px-2`,children:e.state=="special"?o("exhibition.special"):o("exhibition.new")}),t.jsxs(F,{href:route("product-show",{lang:c.language,state:e.state,product:e.slug}),children:[t.jsx("div",{children:t.jsx("img",{src:e.image,alt:"",className:"h-52"})}),t.jsx("p",{className:"self-start font-medium text-lg hover:text-primary-color",children:e.title})]}),t.jsxs("div",{className:"flex justify-between items-center w-full",children:[t.jsxs("p",{className:"font-semibold text-lg text-primary-color",children:[r==null?void 0:r.price," ",o("price.pound")]}),t.jsx("div",{className:"flex",children:t.jsx(W,{rating:Number(e.rate)})})]}),t.jsx("div",{className:"w-full",children:t.jsx("select",{name:"price",className:`rounded-xl focus:border-primary-color focus:ring-primary-color ${c.language=="ar"?"!pl-10 pr-2":"!pr-10 pl-2"}`,style:{backgroundPosition:`${c.language=="ar"?"left":"right"}`},defaultValue:e.product_option[0].title,onChange:l=>T(e.id,Number(l.target.value)),children:e.product_option.map((l,i)=>t.jsxs("option",{value:l.id,children:[l.title," - (",l.price," ",o("price.pound"),")"]},i))})}),t.jsxs("div",{className:"flex w-full gap-4 flex-col lg:flex-row",children:[e.avilable?t.jsx("button",{type:"button",disabled:!0,className:"rounded-lg border-[1px] hover:bg-primary-color hover:text-white transition-all duration-300 border-primary-color px-4 py-2",children:o("exhibition.add_to_cart")}):m(e.id,a)>0?t.jsxs("div",{className:"flex justify-between items-center gap-4",children:[t.jsx("button",{type:"button",onClick:()=>L(e.id,a,e.title,e.image,(r==null?void 0:r.price)??0),className:"rounded-lg  bg-primary-color text-white text-center px-4 py-2 ",children:"+"}),t.jsx("span",{className:"font-medium",children:m(e.id,a)}),t.jsx("button",{type:"button",onClick:()=>q(e.id,a),className:"rounded-lg bg-primary-color text-white text-center px-4 py-2",children:"-"})]}):t.jsx("button",{type:"button",onClick:()=>I(e.id,a,e.title,e.image,(r==null?void 0:r.price)??0),className:"rounded-lg border-[1px] hover:bg-primary-color hover:text-white transition-all duration-300 border-primary-color px-4 py-2",children:o("exhibition.add_to_cart")}),t.jsx("button",{type:"button",onClick:()=>A(e.id,e.title,e.image,a,e.state,e.slug),className:"rounded-lg border-[1px] hover:bg-primary-color hover:text-white transition-all duration-300 border-primary-color px-4 py-2 text-lg flex items-center justify-center",children:t.jsx(Y,{title:o("exhibition.wich_list"),children:t.jsx("span",{children:t.jsx(V,{})})})})]})]},s)})})]})};export{X as default};
