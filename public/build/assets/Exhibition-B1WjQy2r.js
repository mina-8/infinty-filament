import{u as q,r as n,j as t,Y as F,ac as H,ad as M,ae as f,af as Q,ag as W}from"./app-PnxvuRUn.js";import{S as Y,T as D}from"./StarRating-Btz9lM1S.js";import{b as V}from"./index-CXwY__dY.js";import{s as z}from"./index-BPjIG6ua.js";import"./ResizeObserver.es-B1PUzC5B.js";const Z=({products:j})=>{const{t:l,i18n:c}=q(),[v,w]=n.useState(j),N=[{title:"exhibition.special_promtion",payload:"special"},{title:"exhibition.new_products",payload:"new"},{title:"exhibition.top_seller",payload:"top"},{title:"exhibition.kid_range",payload:"kids"}],[_,C]=n.useState("special"),[k,g]=n.useState(!1),S=async e=>{try{g(!0),C(e);const s=await M.get(route("filter-products",{lang:c.language}),{params:{statefilter:e}});w(s.data.products)}finally{g(!1)}},[$,E]=n.useState({}),T=(e,s)=>{E(a=>({...a,[e]:s}))},[u,A]=z.useNotification(),[y,h]=n.useState({}),d=(e,s)=>`${e}-${s}`,[b,G]=n.useState([]),x=()=>{H()};n.useEffect(()=>{b.forEach(e=>{d(e.productId,e.optionId),e.quantity})},[b]),n.useEffect(()=>{x()},[]);const L=(e,s,a,r,o)=>{const i=d(e,s);h(p=>({...p,[i]:(p[i]||0)+1})),f(e,s,a,r,o,1),x(),u.success({message:"",description:`${l("notify.add_cart")}`})},R=(e,s,a,r,o)=>{const i=d(e,s);h(p=>({...p,[i]:(p[i]||0)+1})),f(e,s,a,r,o,1),x(),u.success({message:"",description:`${l("notify.add_cart")}`})},B=(e,s)=>{const a=d(e,s);h(r=>({...r,[a]:Math.max((r[a]||1)-1,0)})),Q(e,s,1),x(),u.success({message:"",description:`${l("notify.remove_cart")}`})},I=(e,s,a,r,o,i)=>{W(e,s,a,r,o,i),u.success({message:"",description:`${l("notify.wish_list")}`})},m=n.useCallback((e,s)=>{const a=d(e,s);return y[a]||0},[y]);return t.jsxs("section",{className:"w-full max-w-6xl mx-auto relative",children:[A,t.jsx("h2",{className:"text-center my-4 font-bold text-3xl",children:l("home.exhibition")}),t.jsx("div",{className:"flex justify-center items-center gap-8 my-8 lg:flex-row lg:flex-nowrap flex-wrap",children:N.map((e,s)=>t.jsx("button",{type:"button",onClick:()=>S(e.payload),className:`border-primary-color hover:border-dashed border-opacity-0 hover:border-opacity-100 border-2 px-4 py-2 rounded-lg
                            ${_===e.payload?"border-opacity-100 border-dashed":""}
                            `,children:l(e.title)},s))}),k?t.jsx("div",{children:"loading ..."}):t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-4 my-8 gap-6 mx-12 lg:mx-0 ",children:v.map((e,s)=>{const a=$[e.id]||e.product_option[0].id,r=e.product_option.find(o=>o.id===a);return t.jsxs("div",{className:"border-2 p-4 rounded-lg flex flex-col justify-center items-center gap-4 relative",children:[(e.state=="special"||e.state=="new")&&t.jsx("div",{className:`absolute top-4 ${c.language=="ar"?"left-0 rounded-s-full":"right-0 rounded-s-full"}  bg-primary-color text-white py-1 px-2`,children:e.state=="special"?l("exhibition.special"):l("exhibition.new")}),t.jsxs(F,{href:route("product-show",{lang:c.language,state:e.state,product:e.slug}),children:[t.jsx("div",{children:t.jsx("img",{src:e.image,alt:"",className:"h-52"})}),t.jsx("p",{className:"self-start font-medium text-lg hover:text-primary-color",children:e.title})]}),t.jsxs("div",{className:"flex justify-between items-center w-full",children:[t.jsxs("p",{className:"font-semibold text-lg text-primary-color",children:[r==null?void 0:r.price," SAR"]}),t.jsx("div",{className:"flex",children:t.jsx(Y,{rating:Number(e.rate)})})]}),t.jsx("div",{className:"w-full",children:t.jsx("select",{name:"price",className:`rounded-xl focus:border-primary-color focus:ring-primary-color ${c.language=="ar"?"!pl-10 pr-2":"!pr-10 pl-2"}`,style:{backgroundPosition:`${c.language=="ar"?"left":"right"}`},defaultValue:e.product_option[0].title,onChange:o=>T(e.id,Number(o.target.value)),children:e.product_option.map((o,i)=>t.jsxs("option",{value:o.id,children:[o.title," - (",o.price," SAR)"]},i))})}),t.jsxs("div",{className:"flex w-full gap-4 flex-col lg:flex-row",children:[e.avilable?t.jsx("button",{type:"button",disabled:!0,className:"rounded-lg border-[1px] hover:bg-primary-color hover:text-white transition-all duration-300 border-primary-color px-4 py-2",children:l("exhibition.add_to_cart")}):m(e.id,a)>0?t.jsxs("div",{className:"flex justify-between items-center gap-4",children:[t.jsx("button",{type:"button",onClick:()=>R(e.id,a,e.title,e.image,(r==null?void 0:r.price)??0),className:"rounded-lg  bg-primary-color text-white text-center px-4 py-2 ",children:"+"}),t.jsx("span",{className:"font-medium",children:m(e.id,a)}),t.jsx("button",{type:"button",onClick:()=>B(e.id,a),className:"rounded-lg bg-primary-color text-white text-center px-4 py-2",children:"-"})]}):t.jsx("button",{type:"button",onClick:()=>L(e.id,a,e.title,e.image,(r==null?void 0:r.price)??0),className:"rounded-lg border-[1px] hover:bg-primary-color hover:text-white transition-all duration-300 border-primary-color px-4 py-2",children:l("exhibition.add_to_cart")}),t.jsx("button",{type:"button",onClick:()=>I(e.id,e.title,e.image,a,e.state,e.slug),className:"rounded-lg border-[1px] hover:bg-primary-color hover:text-white transition-all duration-300 border-primary-color px-4 py-2 text-lg flex items-center justify-center",children:t.jsx(D,{title:l("exhibition.wich_list"),children:t.jsx("span",{children:t.jsx(V,{})})})})]})]},s)})})]})};export{Z as default};
