import{u as B,r as c,j as e,$ as z,Y as j,I as K,q as W,af as Y,ah as w,ai as A,aj as M}from"./app-B9FO6x_7.js";import{C as Q}from"./ContentRenderer-CLFnZYJ3.js";import{I as Z}from"./ImageZoomBox-BeIFQmOx.js";import{S as G,T as J}from"./StarRating-BwQtoNhP.js";import{IoIosHeartEmpty as U}from"./index-BhDQ0sJn.js";import{s as X}from"./index-BKZ0qgiD.js";import"./ResizeObserver.es-B1PUzC5B.js";const le=({product:t})=>{const{t:a,i18n:x}=B(),[u,g]=c.useState(!1),[_,C]=c.useState({}),I=(s,r)=>{C(l=>({...l,[s]:r}))},d=_[t.id]||t.product_option[0].id,i=t.product_option.find(s=>s.id===d),[h,k]=X.useNotification(),[p,n]=c.useState(!1),[y,S]=c.useState([]),m=async()=>{const s=await Y();S(s)};c.useEffect(()=>{m()},[]);const $=async(s,r,l,o,f)=>{try{n(!0),await w(s,r,l,o,f,1),m(),h.success({message:"",description:`${a("notify.add_cart")}`})}catch{n(!1),m()}finally{n(!1)}},E=async(s,r,l,o,f)=>{try{n(!0),await w(s,r,l,o,f,1),m(),h.success({message:"",description:`${a("notify.add_cart")}`})}catch{n(!1),m()}finally{n(!1)}},F=async(s,r)=>{try{n(!0),await A(s,r,1),m(),h.success({message:"",description:`${a("notify.remove_cart")}`})}catch{n(!1),m()}finally{n(!1)}},R=(s,r,l,o)=>{M(s,r,l,o),h.success({message:"",description:`${a("notify.wish_list")}`})},v=c.useCallback((s,r)=>{const l=y.find(o=>o.productId===s&&o.optionId===r);return l?l.quantity:0},[y]),[D,T]=c.useState(0),[N,q]=c.useState({username:"",reviews:"",rate:0}),b=(s,r)=>{q(l=>({...l,[s]:r}))},H=s=>{T(s),b("rate",s)},L=s=>{s.preventDefault()};return e.jsxs(e.Fragment,{children:[e.jsx(z,{title:t.title}),k,e.jsxs("section",{className:"min-h-screen max-w-7xl mx-auto",children:[e.jsx("div",{className:"h-48"}),e.jsxs("div",{className:"bg-slate-300 p-2 rounded-lg flex items-center gap-6 px-6",children:[e.jsx(j,{href:route("welcome",{lang:x.language}),children:e.jsx(K,{})}),e.jsx(j,{href:route("category",{lang:x.language,slug:t.category_slug}),children:t.category_title}),t.subcategory_title&&e.jsx(j,{href:route("subcategory",{lang:x.language,category:t.category_slug,subcategory:t.subcategory_slug}),children:t.subcategory_title}),e.jsx("a",{href:`${W().url}`,className:"text-primary-color",children:t.title})]}),e.jsxs("section",{className:"lg:grid grid-cols-1 lg:grid-cols-[40%_1fr] gap-4 my-4 hidden",children:[e.jsx("div",{children:e.jsx(Z,{image:t.main_image,images:t.images})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("h2",{className:"lg:text-3xl text-xl pb-4 font-bold border-b-2",children:t.title}),e.jsxs("div",{className:"my-4 flex gap-12 items-center border-b-2 pb-4",children:[e.jsx("div",{className:"flex ",children:e.jsx(G,{rating:t.rate})}),e.jsx("div",{className:"border-r-2 border-l-2 px-8 hover:text-primary-color cursor-pointer",onClick:()=>{g(!0);const s=document.getElementById("reviews-comment");s&&s.scrollIntoView({behavior:"smooth"})},children:a("products.review")}),e.jsx("p",{className:"hover:text-primary-color cursor-pointer",onClick:()=>{g(!0);const s=document.getElementById("reviews-comment");s&&s.scrollIntoView({behavior:"smooth"})},children:a("products.comment")})]}),e.jsxs("div",{className:"font-medium text-4xl my-4 pb-4 border-b-2",children:[i==null?void 0:i.price," KD"]}),e.jsxs("div",{className:"my-4 pb-4 border-b-2 flex flex-col",children:[e.jsxs("div",{className:"flex gap-4 items-center my-2",children:[e.jsx("p",{children:a("products.product_code")}),":",e.jsx("p",{children:t.product_code})]}),e.jsxs("div",{className:"flex gap-4 items-center my-2",children:[e.jsx("p",{children:a("products.available")}),":",e.jsx("div",{children:t.avilable?e.jsxs("p",{className:"bg-primary-color p-2 rounded-lg text-white",children:[" ",a("products.no_stock")," "]}):e.jsx("p",{className:"bg-green-400 p-2 rounded-lg text-white",children:a("products.stock")})})]})]}),e.jsxs("div",{className:" rounded-lg p-4 bg-slate-200 flex flex-col gap-6",children:[e.jsx("p",{className:"lg:text-2xl font-bold text-xl",children:a("products.select_price")}),e.jsx("div",{className:"w-full",children:e.jsx("select",{name:"price",className:`rounded-xl focus:border-primary-color focus:ring-primary-color ${x.language=="ar"?"!pl-10 pr-2":"!pr-10 pl-2"} w-full`,style:{backgroundPosition:`${x.language=="ar"?"left":"right"}`},defaultValue:t.product_option[0].title,onChange:s=>I(t.id,Number(s.target.value)),children:t.product_option.map((s,r)=>e.jsxs("option",{value:s.id,children:[s.title," - (",s.price," KD)"]},r))})}),e.jsxs("div",{className:"flex w-full gap-4 flex-col lg:flex-row",children:[t.avilable?e.jsx("button",{type:"button",disabled:p,className:"rounded-lg border-[1px] hover:bg-primary-color hover:text-white transition-all duration-300 border-primary-color px-4 py-2 cursor-not-allowed",children:a("exhibition.add_to_cart")}):v(t.id,d)>0?e.jsxs("div",{className:"flex justify-between items-center gap-4",children:[e.jsx("button",{type:"button",disabled:p,onClick:()=>E(t.id,d,t.title,t.main_image,(i==null?void 0:i.price)??0),className:"rounded-lg  bg-primary-color text-white text-center px-4 py-2",children:"+"}),e.jsx("span",{className:"font-medium",children:v(t.id,d)}),e.jsx("button",{type:"button",disabled:p,onClick:()=>F(t.id,d),className:"rounded-lg bg-primary-color text-white text-center px-4 py-2",children:"-"})]}):e.jsx("button",{type:"button",disabled:p,onClick:()=>$(t.id,d,t.title,t.main_image,(i==null?void 0:i.price)??0),className:"rounded-lg border-[1px] hover:bg-primary-color hover:text-white transition-all duration-300 border-primary-color px-4 py-2",children:a("exhibition.add_to_cart")}),e.jsx("button",{type:"button",onClick:()=>R(t.id,t.title,t.main_image,d),className:"rounded-lg border-[1px] hover:bg-primary-color hover:text-white transition-all duration-300 border-primary-color px-4 py-2 text-lg",children:e.jsx(J,{title:a("exhibition.wich_list"),children:e.jsx(U,{})})})]})]})]})})]}),e.jsx("section",{className:"grid grid-cols-1 lg:grid-cols-1 gap-4 my-4",children:e.jsxs("div",{className:"border-[1px] rounded-lg",children:[e.jsxs("div",{className:"border-b-2 px-4 py-2 flex gap-6 items-center",children:[e.jsx("button",{className:`capitalize lg:text-xl text-lg ${u?"text-black":"text-primary-color"}`,onClick:()=>g(!1),children:a("products.description")}),e.jsx("button",{className:`capitalize lg:text-xl text-lg ${u?"text-primary-color":"text-black"}`,onClick:()=>g(!0),children:a("products.reviews")})]}),e.jsx("div",{id:"reviews-comment",className:"px-4 py-4",children:u?e.jsxs("div",{children:[e.jsx("div",{className:"text-xl py-4",children:a("products.form.title")}),e.jsxs("form",{onSubmit:L,noValidate:!1,className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col w-full gap-2",children:[e.jsxs("label",{htmlFor:"username",children:[a("products.form.name"),e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"username",required:!0,id:"username",value:N.username,onChange:s=>b("username",s.target.value),className:"rounded-xl"})]}),e.jsxs("div",{className:"flex flex-col w-full gap-2",children:[e.jsxs("label",{htmlFor:"reviews",children:[a("products.form.reviews"),e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{name:"reviews",id:"reviews",required:!0,rows:4,value:N.reviews,onChange:s=>b("reviews",s.target.value),className:"rounded-xl"})]}),e.jsxs("div",{className:"flex flex-col w-full gap-2",children:[e.jsxs("label",{children:[a("products.form.rate"),e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(s=>e.jsx("span",{className:`text-2xl cursor-pointer ${s<=D?"text-yellow-400":"text-gray-300"}`,onClick:()=>H(s),children:"â˜…"},s))})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"bg-primary-color px-4 py-2 rounded-lg text-white",children:a("products.form.submit")})})]})]}):e.jsx(Q,{content:t.content})})]})})]})]})};export{le as default};
