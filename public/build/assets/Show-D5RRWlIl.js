import{u as z,r as i,j as e,$ as M,Y as Q,I as W,q as Y,ac as Z,ae as k,af as G,ag as J}from"./app-C4gWgFYn.js";import{C as K}from"./ContentRenderer-DjfCqs2x.js";import{I as U}from"./ImageZoomBox-IbehtpV1.js";import{S as X,T as O}from"./StarRating-wEOuOTCc.js";import{b as P}from"./index-BHx7-lwl.js";import{s as ee}from"./index-CUUhTFHL.js";import"./ResizeObserver.es-B1PUzC5B.js";const ce=({product:t})=>{const{t:a,i18n:b}=z(),[j,p]=i.useState(!1),[S,$]=i.useState({}),I=(s,l)=>{$(r=>({...r,[s]:l}))},c=S[t.id]||t.product_option[0].id,n=t.product_option.find(s=>s.id===c),[g,E]=ee.useNotification(),[N,f]=i.useState({}),m=(s,l)=>`${s}-${l}`,[y,se]=i.useState(!1),[w,R]=i.useState([]),u=async()=>{const s=await Z();R(s)};i.useEffect(()=>{w.forEach(s=>{m(s.productId,s.optionId),s.quantity})},[w]),i.useEffect(()=>{u()},[]);const F=(s,l,r,o,x)=>{const d=m(s,l);f(h=>({...h,[d]:(h[d]||0)+1})),k(s,l,r,o,x,1),u(),g.success({message:"",description:`${a("notify.add_cart")}`})},q=(s,l,r,o,x)=>{const d=m(s,l);f(h=>({...h,[d]:(h[d]||0)+1})),k(s,l,r,o,x,1),u(),g.success({message:"",description:`${a("notify.add_cart")}`})},T=(s,l)=>{const r=m(s,l);f(o=>({...o,[r]:Math.max((o[r]||1)-1,0)})),G(s,l,1),u(),g.success({message:"",description:`${a("notify.remove_cart")}`})},H=(s,l,r,o,x,d)=>{J(s,l,r,o,x,d),g.success({message:"",description:`${a("notify.wish_list")}`})},C=i.useCallback((s,l)=>{const r=m(s,l);return N[r]||0},[N]),[L,V]=i.useState(0),[_,A]=i.useState({username:"",reviews:"",rate:0}),v=(s,l)=>{A(r=>({...r,[s]:l}))},B=s=>{V(s),v("rate",s)},D=s=>{s.preventDefault()};return e.jsxs(e.Fragment,{children:[e.jsx(M,{title:t.title}),E,e.jsxs("section",{className:"min-h-screen max-w-7xl mx-auto",children:[e.jsx("div",{className:"h-48"}),e.jsxs("div",{className:"bg-slate-300 p-2 rounded-lg flex items-center gap-6 px-6",children:[e.jsx(Q,{href:route("welcome",{lang:b.language}),children:e.jsx(W,{})}),e.jsx("a",{href:`${Y().url}`,className:"text-primary-color",children:t.title})]}),e.jsxs("section",{className:"lg:grid grid-cols-1 lg:grid-cols-[40%_1fr] gap-4 my-4 hidden",children:[e.jsx("div",{children:e.jsx(U,{image:t.main_image,images:t.images})}),e.jsx("div",{children:e.jsxs("div",{children:[e.jsx("h2",{className:"lg:text-3xl text-xl pb-4 font-bold border-b-2",children:t.title}),e.jsxs("div",{className:"my-4 flex gap-12 items-center border-b-2 pb-4",children:[e.jsx("div",{className:"flex ",children:e.jsx(X,{rating:t.rate})}),e.jsx("div",{className:"border-r-2 border-l-2 px-8 hover:text-primary-color cursor-pointer",onClick:()=>{p(!0);const s=document.getElementById("reviews-comment");s&&s.scrollIntoView({behavior:"smooth"})},children:a("products.review")}),e.jsx("p",{className:"hover:text-primary-color cursor-pointer",onClick:()=>{p(!0);const s=document.getElementById("reviews-comment");s&&s.scrollIntoView({behavior:"smooth"})},children:a("products.comment")})]}),e.jsxs("div",{className:"font-medium text-4xl my-4 pb-4 border-b-2",children:[n==null?void 0:n.price," SAR"]}),e.jsxs("div",{className:"my-4 pb-4 border-b-2 flex flex-col",children:[e.jsxs("div",{className:"flex gap-4 items-center my-2",children:[e.jsx("p",{children:a("products.product_code")}),":",e.jsx("p",{children:t.product_code})]}),e.jsxs("div",{className:"flex gap-4 items-center my-2",children:[e.jsx("p",{children:a("products.available")}),":",e.jsx("div",{children:t.avilable?e.jsxs("p",{className:"bg-primary-color p-2 rounded-lg text-white",children:[" ",a("products.no_stock")," "]}):e.jsx("p",{className:"bg-green-400 p-2 rounded-lg text-white",children:a("products.stock")})})]})]}),e.jsxs("div",{className:" rounded-lg p-4 bg-slate-200 flex flex-col gap-6",children:[e.jsx("p",{className:"lg:text-2xl font-bold text-xl",children:a("products.select_price")}),e.jsx("div",{className:"w-full",children:e.jsx("select",{name:"price",className:`rounded-xl focus:border-primary-color focus:ring-primary-color ${b.language=="ar"?"!pl-10 pr-2":"!pr-10 pl-2"} w-full`,style:{backgroundPosition:`${b.language=="ar"?"left":"right"}`},defaultValue:t.product_option[0].title,onChange:s=>I(t.id,Number(s.target.value)),children:t.product_option.map((s,l)=>e.jsxs("option",{value:s.id,children:[s.title," - (",s.price," SAR)"]},l))})}),e.jsxs("div",{className:"flex w-full gap-4 flex-col lg:flex-row",children:[t.avilable?e.jsx("button",{type:"button",disabled:!0,className:"rounded-lg border-[1px] hover:bg-primary-color hover:text-white transition-all duration-300 border-primary-color px-4 py-2 cursor-not-allowed",children:a("exhibition.add_to_cart")}):C(t.id,c)>0?e.jsxs("div",{className:"flex justify-between items-center gap-4",children:[e.jsx("button",{type:"button",disabled:y,onClick:()=>q(t.id,c,t.title,t.main_image,(n==null?void 0:n.price)??0),className:"rounded-lg  bg-primary-color text-white text-center px-4 py-2",children:"+"}),e.jsx("span",{className:"font-medium",children:C(t.id,c)}),e.jsx("button",{type:"button",disabled:y,onClick:()=>T(t.id,c),className:"rounded-lg bg-primary-color text-white text-center px-4 py-2",children:"-"})]}):e.jsx("button",{type:"button",disabled:y,onClick:()=>F(t.id,c,t.title,t.main_image,(n==null?void 0:n.price)??0),className:"rounded-lg border-[1px] hover:bg-primary-color hover:text-white transition-all duration-300 border-primary-color px-4 py-2",children:a("exhibition.add_to_cart")}),e.jsx("button",{type:"button",onClick:()=>H(t.id,t.title,t.main_image,c,t.state,t.slug),className:"rounded-lg border-[1px] hover:bg-primary-color hover:text-white transition-all duration-300 border-primary-color px-4 py-2 text-lg",children:e.jsx(O,{title:a("exhibition.wich_list"),children:e.jsx(P,{})})})]})]})]})})]}),e.jsx("section",{className:"grid grid-cols-1 lg:grid-cols-1 gap-4 my-4",children:e.jsxs("div",{className:"border-[1px] rounded-lg",children:[e.jsxs("div",{className:"border-b-2 px-4 py-2 flex gap-6 items-center",children:[e.jsx("button",{className:`capitalize lg:text-xl text-lg ${j?"text-black":"text-primary-color"}`,onClick:()=>p(!1),children:a("products.description")}),e.jsx("button",{className:`capitalize lg:text-xl text-lg ${j?"text-primary-color":"text-black"}`,onClick:()=>p(!0),children:a("products.reviews")})]}),e.jsx("div",{id:"reviews-comment",className:"px-4 py-4",children:j?e.jsxs("div",{children:[e.jsx("div",{className:"text-xl py-4",children:a("products.form.title")}),e.jsxs("form",{onSubmit:D,noValidate:!1,className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col w-full gap-2",children:[e.jsxs("label",{htmlFor:"username",children:[a("products.form.name"),e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"username",required:!0,id:"username",value:_.username,onChange:s=>v("username",s.target.value),className:"rounded-xl"})]}),e.jsxs("div",{className:"flex flex-col w-full gap-2",children:[e.jsxs("label",{htmlFor:"reviews",children:[a("products.form.reviews"),e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("textarea",{name:"reviews",id:"reviews",required:!0,rows:4,value:_.reviews,onChange:s=>v("reviews",s.target.value),className:"rounded-xl"})]}),e.jsxs("div",{className:"flex flex-col w-full gap-2",children:[e.jsxs("label",{children:[a("products.form.rate"),e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(s=>e.jsx("span",{className:`text-2xl cursor-pointer ${s<=L?"text-yellow-400":"text-gray-300"}`,onClick:()=>B(s),children:"â˜…"},s))})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"bg-primary-color px-4 py-2 rounded-lg text-white",children:a("products.form.submit")})})]})]}):e.jsx(K,{content:t.content})})]})})]})]})};export{ce as default};
