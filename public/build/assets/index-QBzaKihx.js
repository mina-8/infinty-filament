import{u as E,r as c,j as t,Y as Z,x as T,C as N,D as F,E as G,aH as W}from"./app-B9rQ9p0e.js";import{S as q,T as Q,I as R}from"./index-D9_GEwmF.js";import{s as D}from"./index-DNNcRSRP.js";const z=({products:x,page:v,category_slug:b,subcategory_slug:w=null})=>{const{t:n,i18n:i}=E(),[C,_]=c.useState({}),[h,I]=c.useState(!1),k=(e,a)=>{_(s=>({...s,[e]:a}))},[f,S]=c.useState([]),[p,H]=D.useNotification(),[m,y]=c.useState({}),d=(e,a)=>`${e}-${a}`,g=async()=>{const e=await T();S(e)};c.useEffect(()=>{f.forEach(e=>{d(e.productId,e.optionId),e.quantity})},[f]),c.useEffect(()=>{g()},[]);const V=(e,a,s,r,o)=>{const l=d(e,a);y(u=>({...u,[l]:(u[l]||0)+1})),N(e,a,s,r,o,1),g(),p.success({message:"",description:`${n("notify.add_cart")}`})},$=(e,a,s,r,o)=>{const l=d(e,a);y(u=>({...u,[l]:(u[l]||0)+1})),N(e,a,s,r,o,1),g(),p.success({message:"",description:`${n("notify.add_cart")}`})},L=(e,a)=>{const s=d(e,a);y(r=>({...r,[s]:Math.max((r[s]||1)-1,0)})),F(e,a,1),g(),p.success({message:"",description:`${n("notify.remove_cart")}`})},M=(e,a,s,r,o,l)=>{G(e,a,s,r,o,l),p.success({message:"",description:`${n("notify.wish_list")}`})},j=c.useCallback((e,a)=>{const s=d(e,a);return m[s]||0},[m]);return t.jsxs(t.Fragment,{children:[H,x.map((e,a)=>{const s=C[e.id]||e.product_option[0].id,r=e.product_option.find(o=>o.id===s);return t.jsxs("div",{className:"border-2 p-4 rounded-lg flex  items-center gap-4 relative",children:[(e.state=="special"||e.state=="new")&&t.jsx("div",{className:`absolute top-4 ${i.language=="ar"?"left-0 rounded-s-full":"right-0 rounded-s-full"}  bg-primary-color text-white py-1 px-2`,children:e.state=="special"?n("exhibition.special"):n("exhibition.new")}),t.jsx(Z,{href:v==="category"?route("product-category",{lang:i.language,category:b,product:e.slug}):route("product-subcategory",{lang:i.language,category:b,subcategory:w,product:e.slug}),children:t.jsx("div",{children:t.jsx("img",{src:e.main_image,alt:"",className:"h-52"})})}),t.jsxs("div",{className:"flex flex-col justify-between gap-4",children:[t.jsx("p",{className:" font-semibold text-lg hover:text-primary-color",children:e.title}),t.jsxs("p",{className:"font-semibold text-lg text-primary-color",children:[r==null?void 0:r.price," ",n("price.pound")]}),t.jsx("div",{className:"flex",children:t.jsx(q,{rating:e.rate})}),t.jsx("select",{name:"price",className:`rounded-xl focus:border-primary-color focus:ring-primary-color ${i.language=="ar"?"!pl-10 pr-2":"!pr-10 pl-2"}`,style:{backgroundPosition:`${i.language=="ar"?"left":"right"}`},defaultValue:e.product_option[0].title,onChange:o=>k(e.id,Number(o.target.value)),children:e.product_option.map((o,l)=>t.jsxs("option",{value:o.id,children:[o.title," - (",o.price," ",n("price.pound"),")"]},l))}),t.jsxs("div",{className:"flex w-full gap-4 flex-col lg:flex-row",children:[e.avilable?t.jsx("button",{type:"button",disabled:!0,className:"rounded-lg border-[1px] hover:bg-primary-color hover:text-white transition-all duration-300 border-primary-color px-4 py-2",children:n("exhibition.add_to_cart")}):j(e.id,s)>0?t.jsxs("div",{className:"flex justify-between items-center gap-4",children:[t.jsx("button",{type:"button",disabled:h,onClick:()=>$(e.id,s,e.title,e.main_image,(r==null?void 0:r.price)??0),className:"rounded-lg  bg-primary-color text-white text-center px-4 py-2",children:"+"}),t.jsx("span",{className:"font-medium",children:j(e.id,s)}),t.jsx("button",{type:"button",disabled:h,onClick:()=>L(e.id,s),className:"rounded-lg bg-primary-color text-white text-center px-4 py-2",children:"-"})]}):t.jsx("button",{type:"button",disabled:h,onClick:()=>V(e.id,s,e.title,e.main_image,(r==null?void 0:r.price)??0),className:"rounded-lg border-[1px] hover:bg-primary-color hover:text-white transition-all duration-300 border-primary-color px-4 py-2",children:n("exhibition.add_to_cart")}),t.jsx("button",{type:"button",onClick:()=>M(e.id,e.title,e.main_image,s,e.state,e.slug),className:"rounded-lg border-[1px] hover:bg-primary-color hover:text-white transition-all duration-300 border-primary-color px-4 py-2 text-lg flex justify-center items-center",children:t.jsx(Q,{title:n("exhibition.wich_list"),children:t.jsx("span",{children:t.jsx(R,{})})})})]})]})]},a)})]})},J=({products:x,page:v,category_slug:b,subcategory_slug:w=null})=>{const{t:n,i18n:i}=E(),[C,_]=c.useState({}),[h,I]=c.useState(!1),k=(e,a)=>{_(s=>({...s,[e]:a}))},[f,S]=c.useState([]),[p,H]=D.useNotification(),[m,y]=c.useState({}),d=(e,a)=>`${e}-${a}`,g=async()=>{const e=await T();S(e)};c.useEffect(()=>{f.forEach(e=>{d(e.productId,e.optionId),e.quantity})},[f]),c.useEffect(()=>{g()},[]);const V=(e,a,s,r,o)=>{const l=d(e,a);y(u=>({...u,[l]:(u[l]||0)+1})),N(e,a,s,r,o,1),g(),p.success({message:"",description:`${n("notify.add_cart")}`})},$=(e,a,s,r,o)=>{const l=d(e,a);y(u=>({...u,[l]:(u[l]||0)+1})),N(e,a,s,r,o,1),g(),p.success({message:"",description:`${n("notify.add_cart")}`})},L=(e,a)=>{const s=d(e,a);y(r=>({...r,[s]:Math.max((r[s]||1)-1,0)})),F(e,a,1),g(),p.success({message:"",description:`${n("notify.remove_cart")}`})},M=(e,a,s,r,o,l)=>{G(e,a,s,r,o,l),p.success({message:"",description:`${n("notify.wish_list")}`})},j=c.useCallback((e,a)=>{const s=d(e,a);return m[s]||0},[m]);return t.jsxs(t.Fragment,{children:[H,x.map((e,a)=>{const s=C[e.id]||e.product_option[0].id,r=e.product_option.find(o=>o.id===s);return t.jsxs("div",{className:"border-2 p-4 rounded-lg flex flex-col justify-center items-center gap-4 relative",children:[(e.state=="special"||e.state=="new")&&t.jsx("div",{className:`absolute top-4 ${i.language=="ar"?"left-0 rounded-s-full":"right-0 rounded-s-full"}  bg-primary-color text-white py-1 px-2`,children:e.state=="special"?n("exhibition.special"):n("exhibition.new")}),t.jsxs(Z,{href:v==="category"?route("product-category",{lang:i.language,category:b,product:e.slug}):route("product-subcategory",{lang:i.language,category:b,subcategory:w,product:e.slug}),children:[t.jsx("div",{children:t.jsx("img",{src:e.main_image,alt:"",className:"h-52"})}),t.jsx("p",{className:"self-start font-medium text-lg hover:text-primary-color",children:e.title})]}),t.jsxs("div",{className:"flex justify-between items-center w-full",children:[t.jsxs("p",{className:"font-semibold text-lg text-primary-color",children:[r==null?void 0:r.price," ",n("price.pound")]}),t.jsx("div",{className:"flex",children:t.jsx(q,{rating:e.rate})})]}),t.jsx("div",{className:"w-full",children:t.jsx("select",{name:"price",className:`rounded-xl focus:border-primary-color focus:ring-primary-color ${i.language=="ar"?"!pl-10 pr-2":"!pr-10 pl-2"} w-full`,style:{backgroundPosition:`${i.language=="ar"?"left":"right"}`},defaultValue:e.product_option[0].title,onChange:o=>k(e.id,Number(o.target.value)),children:e.product_option.map((o,l)=>t.jsxs("option",{value:o.id,children:[o.title," - (",o.price," ",n("price.pound"),")"]},l))})}),t.jsxs("div",{className:"flex w-full gap-4 flex-col lg:flex-row",children:[e.avilable?t.jsx("button",{type:"button",disabled:!0,className:"rounded-lg border-[1px] hover:bg-primary-color hover:text-white transition-all duration-300 border-primary-color px-4 py-2",children:n("exhibition.add_to_cart")}):j(e.id,s)>0?t.jsxs("div",{className:"flex justify-between items-center gap-4",children:[t.jsx("button",{type:"button",disabled:h,onClick:()=>$(e.id,s,e.title,e.main_image,(r==null?void 0:r.price)??0),className:"rounded-lg  bg-primary-color text-white text-center px-4 py-2",children:"+"}),t.jsx("span",{className:"font-medium",children:j(e.id,s)}),t.jsx("button",{type:"button",disabled:h,onClick:()=>L(e.id,s),className:"rounded-lg bg-primary-color text-white text-center px-4 py-2",children:"-"})]}):t.jsx("button",{type:"button",disabled:h,onClick:()=>V(e.id,s,e.title,e.main_image,(r==null?void 0:r.price)??0),className:"rounded-lg border-[1px] hover:bg-primary-color hover:text-white transition-all duration-300 border-primary-color px-4 py-2",children:n("exhibition.add_to_cart")}),t.jsx("button",{type:"button",onClick:()=>M(e.id,e.title,e.main_image,s,e.state,e.slug),className:"rounded-lg border-[1px] hover:bg-primary-color hover:text-white transition-all duration-300 border-primary-color px-4 py-2 text-lg flex justify-center items-center",children:t.jsx(Q,{title:n("exhibition.wich_list"),children:t.jsx("span",{children:t.jsx(R,{})})})})]})]},a)})]})};function K(){const x=localStorage.getItem("grid");return x===null?!0:x==="true"}function U(){return localStorage.setItem("grid","true"),!0}function X(){return localStorage.setItem("grid","false"),!1}function O(x){return W({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M3 3C2.44772 3 2 3.44772 2 4V8L7.5 8V3H3ZM9.5 3V8H14.5V3H9.5ZM16.5 3V8H22V4C22 3.44772 21.5523 3 21 3H16.5ZM22 10H16.5V14H22V10ZM22 16H16.5V21H21C21.5523 21 22 20.5523 22 20V16ZM14.5 21V16H9.5V21H14.5ZM7.5 21V16H2V20C2 20.5523 2.44772 21 3 21H7.5ZM2 14H7.5V10L2 10V14ZM9.5 10H14.5V14H9.5V10Z"},child:[]}]})(x)}export{z as F,K as G,O as R,U as a,J as b,X as s};
